<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ASM小助手卸载</title>
    <url>/2021/12/28/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/</url>
    <content><![CDATA[<h1 id="ASM小助手卸载"><a href="#ASM小助手卸载" class="headerlink" title="ASM小助手卸载"></a>ASM小助手卸载</h1><h2 id="写在前的"><a href="#写在前的" class="headerlink" title="写在前的"></a>写在前的</h2><blockquote>
<p>声明：本文仅仅是为了技术学习与研究，请勿胡搞瞎搞</p>
</blockquote>
<p>有些公司内网的上网认证是用的ASM小助手，不过有时候用自己电脑接入公司内网可能会主动下载到ASM入网小助手的安装包。</p>
<p>如果一不小心双击了安装包，软件就会自动安装，这个软件是无法在<code>控制面板&gt;程序卸载</code>里卸载的，并且可能会禁用我们的U盘。</p>
<p>虽然正常方式无法卸载，但是我们可以通过不正常的方式卸载。</p>
<p>卸载思路来源于</p>
<blockquote>
<p>上网小助手IsAgent卸载程序破解<br><a href="https://www.52pojie.cn/thread-1428177-1-1.html">https://www.52pojie.cn/thread-1428177-1-1.html</a><br>(出处: 吾爱破解论坛)</p>
</blockquote>
<p>教程仅供学习和参考，解决私人设备的问题，请勿他用。</p>
<h2 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h2><p>程序安装目录下会有一个<strong>IsaSetup.exe</strong>文件，这个程序就可以为我们提供卸载功能，只不过需要输入验证码（这个验证码一般是相关的管理人员才知道的）如图：</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/1.png"></p>
<p>那么我们是不是可以用<a href="https://www.52pojie.cn/thread-350397-1-1.html">Ollydbg</a>来看一下，打开任务管理器找到<strong>IsaHelp</strong>进程，然后右击打开文件所在位置</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/2.png"></p>
<p>来到安装目录下我们可以看到有一个名为<strong>IsaSetup.exe</strong>的文件</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/3.png"></p>
<p>我们双击运行这个程序会弹出一个窗口，如图：</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/4.png"></p>
<p>那么我们加上<code>-remove</code>参数是不是就可会弹出卸载界面，当加上参数运行后弹出了前文中输入验证码的界面。</p>
<p>接下来用Ollydbg打开这个文件(Ollydbg需要管理员权限运行)</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/5.png"></p>
<p>打开时要注意加上<code>-remove</code>参数</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/6.png"></p>
<p>打开后在主窗口右击进行查找参考文本，如图：</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/7.png"></p>
<p>然后拖动滚动条找到如下图所示的文字信息，并双击这一行</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/8.png"></p>
<p>双击会会跳转到主窗口，我们可以看到选中行上面有一条<code>0F85 7C000000 jnz IsaSetup.00402E13</code>指令</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/9.png"></p>
<p><code>jnz</code>是汇编条件转移指令，那么我们将条指定改为<code>jz</code>是不是就变成了与原来相反的结果，即不需要验证码。双击这条指令后会弹出窗口在输入框里将jnz改为jz，并点击汇编按钮，点完按钮后窗口不会消失需要点取消。</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/10.png"></p>
<p>完成操作后会发现这一条变红了，<code>jnz</code>也变成了<code>je</code></p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/11.png"></p>
<p>接来下我们就可以按F9运行试一下了，经过几秒的等待果然出现了我们想要的结果</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/12.png"></p>
<p>点击确定就可以进行卸载了，卸载后可能会提示重启系统。</p>
<h2 id="解除U盘禁用"><a href="#解除U盘禁用" class="headerlink" title="解除U盘禁用"></a>解除U盘禁用</h2><p>当我们满怀欣喜得重启我们的电脑并插入U盘后发现依然无法识别到我们的U盘，这里还需要删除注册表的一个值</p>
<p>打开注册表找到<code>\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Class\&#123;36fc9e60-c465-11cf-8056-444553540000&#125;</code></p>
<p>我们可能会看到有LowerFilters_Redir项，值为IsdUsb，将这一项删除（建议导出备份）后应该就可以识别到U盘了，如果还识别不到U盘就重启一下电脑。</p>
<p><img src="/img/ASM%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%8D%B8%E8%BD%BD/13.png"></p>
<h2 id="写在后的"><a href="#写在后的" class="headerlink" title="写在后的"></a>写在后的</h2><p>到这里基本上卸载了小助手并解除了U盘的禁用，这种卸载方式是在万般无奈的情况下使用的，即自己的电脑不小心装了小助手并且公司相关管理人员不给处理。请不要使用此方法卸载公司资产机器上的小助手，如果使用此方法违反了公司的相关规定或产生了严重后果，请自行负责。</p>
]]></content>
      <tags>
        <tag>瞎搞</tag>
      </tags>
  </entry>
  <entry>
    <title>Git命令集</title>
    <url>/2020/11/10/Git%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h1 id="Git命令集"><a href="#Git命令集" class="headerlink" title="Git命令集"></a>Git命令集</h1><blockquote>
<p>来自于阿里云定制鼠标垫，转为电子版方便以后参考</p>
</blockquote>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>git config -l</td>
<td>查看当前生效的配置信息</td>
</tr>
<tr>
<td>git config [–global | –system] -e</td>
<td>编辑配置文件，–global：全局级，–system：系统级，默认本地级</td>
</tr>
<tr>
<td>git config [–global | –system] [–add] &lt;name&gt; &lt;value&gt;</td>
<td>设置单值或多值（–add）配置项</td>
</tr>
<tr>
<td>git config [–global | –system] –unset &lt;name&gt;</td>
<td>删除配置项</td>
</tr>
<tr>
<td>git config [–global | –system] [–get-all] &lt;name&gt;</td>
<td>查询单值或多值（–get-all）配置项</td>
</tr>
</tbody></table>
<h2 id="创建版本库"><a href="#创建版本库" class="headerlink" title="创建版本库"></a>创建版本库</h2><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>git init [–bare] &lt;仓库路径&gt;</td>
<td>创建一个新仓库</td>
</tr>
<tr>
<td>git clone &lt;远程仓库网址&gt; [本地目录]</td>
<td>克隆远程仓库到本地</td>
</tr>
</tbody></table>
<h2 id="修改和提交"><a href="#修改和提交" class="headerlink" title="修改和提交"></a>修改和提交</h2><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>git status</td>
<td>查看本地仓库的状态</td>
</tr>
<tr>
<td>git diff</td>
<td>查看本地文件改动</td>
</tr>
<tr>
<td>git diff –cached</td>
<td>查看暂存区文件改动</td>
</tr>
<tr>
<td>git diff &lt;版本&gt;</td>
<td>查看本地文件和指定版本之间的差异</td>
</tr>
<tr>
<td>git add &lt;路径&gt;</td>
<td>把本地文件的改动添加到暂存区</td>
</tr>
<tr>
<td>git add -p</td>
<td>选择本地部分修改加入暂存区</td>
</tr>
<tr>
<td>git add -u</td>
<td>仅添加已被跟踪文件的本地修改</td>
</tr>
<tr>
<td>git add -A</td>
<td>添加本地所有的改动到暂存区</td>
</tr>
<tr>
<td>git mv &lt;源文件&gt; &lt;目标文件&gt;</td>
<td>重命名指定的文件或者文件夹</td>
</tr>
<tr>
<td>git rm &lt;文件&gt;</td>
<td>删除指定文件</td>
</tr>
<tr>
<td>git rm –cached &lt;文件&gt;</td>
<td>只删除暂存区文件，不删除本地文件</td>
</tr>
<tr>
<td>git clean -i</td>
<td>清理本地文件（-i进入交互式界面）</td>
</tr>
<tr>
<td>git commit -m &lt;描述信息&gt; [-m &lt;描述信息&gt;…]</td>
<td>提交并使用指定描述作为提交说明</td>
</tr>
<tr>
<td>git commit –amend</td>
<td>修补当前提交</td>
</tr>
<tr>
<td>git commit –fixup &lt;提交&gt;</td>
<td>修补历史提交</td>
</tr>
</tbody></table>
<h2 id="查看提交日志"><a href="#查看提交日志" class="headerlink" title="查看提交日志"></a>查看提交日志</h2><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>git log</td>
<td>打印所有的提交记录</td>
</tr>
<tr>
<td>git log –oneline &lt;版本1&gt;..&lt;版本2&gt;</td>
<td>打印&lt;版本1&gt;到&lt;版本2&gt;新增提交，每个提交显示一行</td>
</tr>
<tr>
<td>git log -p [&lt;路径&gt;]</td>
<td>显示日志及详细的提交补丁</td>
</tr>
<tr>
<td>git blame [-Lm,+n][&lt;版本&gt;] –&lt;路径&gt;</td>
<td>对文件逐行显示最近一次的修改信息</td>
</tr>
</tbody></table>
<h2 id="撤销操作"><a href="#撤销操作" class="headerlink" title="撤销操作"></a>撤销操作</h2><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>git reset</td>
<td>撤销暂存区改动</td>
</tr>
<tr>
<td>git reset –soft &lt;版本&gt;</td>
<td>软重置：仅修改HEAD指向，暂存区和本地文件均不修改</td>
</tr>
<tr>
<td>git reset [–mixed] &lt;版本&gt;</td>
<td>混合重置：本地文件不修改，但HEAD指向的暂存区都修改</td>
</tr>
<tr>
<td>git reset –hard &lt;版本&gt;</td>
<td>硬重置：HEAD指向、暂存区、本地文件全都修改</td>
</tr>
<tr>
<td>git revert [-m 1] &lt;版本&gt;</td>
<td>生成一个新的提交来撤销某次历史提交（-m参数用于撤销合并提交）</td>
</tr>
</tbody></table>
<h2 id="远程操作"><a href="#远程操作" class="headerlink" title="远程操作"></a>远程操作</h2><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>git remote add &lt;别名&gt; &lt;URL&gt;</td>
<td>添加一个远程仓库</td>
</tr>
<tr>
<td>git remote -v</td>
<td>查看远程仓库的详细信息</td>
</tr>
<tr>
<td>git remote remove &lt;别名&gt;</td>
<td>删除指定名称的远程仓库</td>
</tr>
<tr>
<td>git remote set-url &lt;别名&gt;  &lt;新URL&gt;</td>
<td>修改远程仓库的URL地址</td>
</tr>
<tr>
<td>git fetch [–prune] &lt;远程仓库别名&gt;</td>
<td>获取远程仓库引用，使用–prune会清理本地缓存的已由远程删除的引用</td>
</tr>
<tr>
<td>git fetch &lt;远程仓库别名&gt; &lt;分支名&gt;</td>
<td>将远程仓库指定分支的最新版本取回本地</td>
</tr>
<tr>
<td>git pull &lt;远程仓库别名&gt; &lt;分支名&gt;</td>
<td>拉取远程仓库某个分支的更新，再与本地的指定分支合并</td>
</tr>
<tr>
<td>git push &lt;远程仓库别名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</td>
<td>把本地仓库的分支推送到远程仓库的指定分支</td>
</tr>
<tr>
<td>git push &lt;远程仓库别名&gt; –delete &lt;远程分支名&gt;</td>
<td>删除指定的远程仓库的分支</td>
</tr>
<tr>
<td>git push &lt;远程仓库的别名&gt; &lt;标签名称&gt;</td>
<td>将指定的标签提交到远程仓库</td>
</tr>
<tr>
<td>git push &lt;远程仓库的别名&gt; –tags</td>
<td>将本地所有的标签全部都提交到远程仓库</td>
</tr>
</tbody></table>
<h2 id="分支与标签"><a href="#分支与标签" class="headerlink" title="分支与标签"></a>分支与标签</h2><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>git branch [-a]</td>
<td>查看本地分支</td>
</tr>
<tr>
<td>git branch &lt;新分支&gt; [&lt;基线&gt;]</td>
<td>从基线创建新分支</td>
</tr>
<tr>
<td>git branch -d &lt;本地分支名&gt;</td>
<td>删除指定分支</td>
</tr>
<tr>
<td>git checkout &lt;本地分支名&gt;</td>
<td>切换到指定分支</td>
</tr>
<tr>
<td>git checkout -b &lt;新分支&gt; &lt;基线&gt;</td>
<td>创建并切换到新分支</td>
</tr>
<tr>
<td>git checkout &lt;版本&gt; –&lt;文件&gt;</td>
<td>用指定版本的文件覆盖本地文件</td>
</tr>
<tr>
<td>git tag</td>
<td>查看本地所有标签</td>
</tr>
<tr>
<td>git tag -m &lt;标签描述信息&gt; &lt;标签名称&gt; [&lt;版本&gt;]</td>
<td>基于指定提交（未指定为最新提交）创建新标签</td>
</tr>
<tr>
<td>git tag -s -u &lt;key-id&gt; -m &lt;标签描述信息&gt; &lt;标签名称&gt; [&lt;版本&gt;]</td>
<td>创建带有PGP签名的标签</td>
</tr>
<tr>
<td>git tag -d &lt;标签名称&gt;</td>
<td>删除指定标签</td>
</tr>
</tbody></table>
<h2 id="合并与变基"><a href="#合并与变基" class="headerlink" title="合并与变基"></a>合并与变基</h2><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>git merge &lt;分支名称&gt;</td>
<td>把指定的分支合并到当前所在的分支下</td>
</tr>
<tr>
<td>git merge (–continue|–abort|–quit)</td>
<td>合并冲突</td>
</tr>
<tr>
<td>git rebase &lt;分支名称&gt;</td>
<td>变基：把当前分支改动在新的基线上重放</td>
</tr>
<tr>
<td>git rebase -i –autosquash &lt;分支名称&gt;</td>
<td>交互式变基，通常用于整理提交</td>
</tr>
<tr>
<td>git rebase (–continue|–skip|–abort|–quit|–edit -todo)</td>
<td>变基暂停后，选择继续、跳过、终止或编辑任务</td>
</tr>
</tbody></table>
]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git密钥管理工具</title>
    <url>/2022/06/30/Git%E5%AF%86%E9%92%A5%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<h1 id="Git密钥管理工具"><a href="#Git密钥管理工具" class="headerlink" title="Git密钥管理工具"></a>Git密钥管理工具</h1><h2 id="问题的出现"><a href="#问题的出现" class="headerlink" title="问题的出现"></a>问题的出现</h2><p>当你有多个github帐号并且你喜欢使用密钥认证方式的时候会遇到不同帐号密钥更换的问题。 githun的机制是一个rsa公钥只能被绑定一次，无法做到一对rsa密钥在两个以上的账户使用，只能在使用某个帐号时进行手动切换。<br>每次更改配置文件是一件非常麻烦的事情，为了更优雅的切换密钥而编写了skm。</p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>用Go语言编写，使用cobra用来处理命令行参数，使用promptui简化命令行的输入↑↓键选择要切换的密钥即可。</p>
<p>项目地址：<a href="https://github.com/lovexy-fun/skm">skm</a></p>
<h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><p>可以直接在 <a href="https://github.com/lovexy-fun/skm/releases">release</a> 页面下载对应操作系统的版本，如果您熟悉Go语言也可以使用源码自行构建。</p>
<h3 id="skm"><a href="#skm" class="headerlink" title="skm"></a>skm</h3><p>使用<code>skm</code>命令可以查看当前正在使用的key</p>
<p>输入</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">skm</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Effective key: testkey</span><br></pre></td></tr></table></figure>

<h3 id="帮助"><a href="#帮助" class="headerlink" title="帮助"></a>帮助</h3><p>输入</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">skm -h</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">SSH key manager</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  skm [flags]</span><br><span class="line">  skm [command]</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  add         Add a key to manager</span><br><span class="line">  del         Delete a key from manager</span><br><span class="line">  help        Help about any command</span><br><span class="line">  ls          List all keys</span><br><span class="line">  sel         Choose a key to make it effective</span><br><span class="line"></span><br><span class="line">Flags:</span><br><span class="line">  -h, --help   help for skm</span><br><span class="line"></span><br><span class="line">Use &quot;skm [command] --help&quot; for more information about a command.</span><br></pre></td></tr></table></figure>

<h3 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h3><p>向管理器添加一个私钥</p>
<p>例如:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">skm add -f ./id_rsa -n testkey</span><br></pre></td></tr></table></figure>

<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>从管理器里删除一个私钥</p>
<p>例如:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">skm del</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">然后按↑/↓选择要删除的私钥</span></span><br></pre></td></tr></table></figure>

<h3 id="列出所有"><a href="#列出所有" class="headerlink" title="列出所有"></a>列出所有</h3><p>列出所有私钥</p>
<p>例如:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">skm ls</span><br></pre></td></tr></table></figure>

<h3 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h3><p>选择一个私钥使其生效</p>
<p>例如:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">skm sel</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">然后按↑/↓选择要删除的私钥</span></span><br></pre></td></tr></table></figure>

<h2 id="Bug反馈-amp-意见建议"><a href="#Bug反馈-amp-意见建议" class="headerlink" title="Bug反馈&amp;意见建议"></a>Bug反馈&amp;意见建议</h2><p><a href="https://github.com/lovexy-fun/skm/issues">Issues</a></p>
]]></content>
      <tags>
        <tag>软件</tag>
      </tags>
  </entry>
  <entry>
    <title>Mongodb Database Tools使用</title>
    <url>/2022/07/24/Mongodb%20Database%20Tools%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="Mongodb-Database-Tools使用"><a href="#Mongodb-Database-Tools使用" class="headerlink" title="Mongodb Database Tools使用"></a>Mongodb Database Tools使用</h1><p>下载地址：<a href="https://www.mongodb.com/try/download/database-tools">Mongodb Database Tools</a></p>
<h2 id="mongodump"><a href="#mongodump" class="headerlink" title="mongodump"></a>mongodump</h2><p>使用这个可以导出数据原始的二进制数据</p>
<p>一般可以使用下面的语句进行某个集合数据的导出，还可以加入查询条件导出指定的数据。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mongodump -h 127.0.0.1:27017 -d testdb -c user_collection -o ./outdate --gzip -q &#x27;&#123;\&quot;name\&quot;:\&quot;zhangsan\&quot;&#125;&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="mongorestore"><a href="#mongorestore" class="headerlink" title="mongorestore"></a>mongorestore</h2><p>使用<code>mongodump</code>导出的数据需要使用<code>mongorestore</code>恢复到指定的数据库的集合里</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mongorestore -h 127.0.0.1:27017 -d testdb -c user_collection --dir ./outdate/testdb/user_collection.bson.gz --gzip</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx反向代理访问内网服务器</title>
    <url>/2021/06/10/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    <content><![CDATA[<h1 id="Nginx反向代理访问内网服务器"><a href="#Nginx反向代理访问内网服务器" class="headerlink" title="Nginx反向代理访问内网服务器"></a>Nginx反向代理访问内网服务器</h1><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>公司给配的台式机太垃圾了，不能访问外部网络就算了，还没有maven私服。近期项目不光得使用maven还得使用内网中的数据库之类，台式机太卡只能用自己的笔记本用爱发电。公司内网需要通过<strong>ASM入网小助手</strong>进行认证，一旦安装了<strong>ASM入网小助手</strong>笔记本就无法使用U盘了，并且还会乱改你的注册表。不想装小助手还想连接内网的数据库服务，那要怎么办呢？于是想到使用Nginx进行反向代理。</p>
<h2 id="Nginx反向代理配置"><a href="#Nginx反向代理配置" class="headerlink" title="Nginx反向代理配置"></a>Nginx反向代理配置</h2><p>先上个配置</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment">#根节点下</span></span><br><span class="line"><span class="section">stream</span> &#123;</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">12345</span>; <span class="comment">#监听本机的端口</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> <span class="number">192.168.123.123:3306</span>; <span class="comment">#代理内网的mysql</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用上面配置启动nginx后，在本机就可以使用<code>127.0.0.1:12345</code>来连接mysql了。<br>按照这种方法只要自己的笔记本接入内网，再在内网台式机上进行如此配置nginx，使用<code>[内网台式机IP]:12345</code>就可以连接内网的mysql了。</p>
<h2 id="优雅的进行Nginx反向代理配置"><a href="#优雅的进行Nginx反向代理配置" class="headerlink" title="优雅的进行Nginx反向代理配置"></a>优雅的进行Nginx反向代理配置</h2><p>直接改<code>nginx.conf</code>似乎不是很友好，配置多了也记不清哪个端口代理哪个服务了，同事要用的话还需要说明代理关系。于是乎就有了写一个nginx配置管理系统的想法，主要需求为：代理关系说明、代理配置、nginx控制。原本想使用Qt编写GUI界面程序，但是发现解析Nginx配置文件有点难受，于是使用SpringBoot+Layui+MybatisPlus+Sqlite做了一套web管理系统。设计思路是每次加载<code>nginx.conf</code>前根据数据库数据生成配置文件，由后端提供控制nginx停止与启动的接口。详细代码和release请参见<a href="https://github.com/lovexy-fun/reverse-proxy">GitHub</a>。</p>
<h2 id="reverse-proxy使用说明（v1-0-1）"><a href="#reverse-proxy使用说明（v1-0-1）" class="headerlink" title="reverse-proxy使用说明（v1.0.1）"></a>reverse-proxy使用说明（v1.0.1）</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>下载地址：<a href="https://github.com/lovexy-fun/reverse-proxy/releases">https://github.com/lovexy-fun/reverse-proxy/releases</a></p>
<p>请选择新版本下载使用，目前仅支持windows系统，其他系统请自行修改源码。</p>
<p>下载zip后请放到非管理员权限可访问的目录下使用（非系统盘或当前用户目录）</p>
<h3 id="文件说明"><a href="#文件说明" class="headerlink" title="文件说明"></a>文件说明</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">nginx nginx程序目录</span><br><span class="line">application.yml 应用配置文件</span><br><span class="line">reverse-proxy.db 数据库文件</span><br><span class="line">reverse-proxy.jar java主程序</span><br><span class="line">start.bat 启动脚本</span><br><span class="line">stop.bat 停止脚本</span><br></pre></td></tr></table></figure>

<h3 id="启动前需要修改的"><a href="#启动前需要修改的" class="headerlink" title="启动前需要修改的"></a>启动前需要修改的</h3><p>用文本编辑器（不要用系统自带的记事本）打开<code>application.yml</code></p>
<p>修改默认管理账号和密码（默认都是admin）：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">admin:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">自定义的账号</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">自定义的密码</span></span><br></pre></td></tr></table></figure>

<p>修改程序的启动端口（默认8999）：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8999</span></span><br></pre></td></tr></table></figure>

<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>双击<code>start.bat</code>启动程序</p>
<p>启动后访问 <a href="http://localhost:8999/">http://localhost:8999</a> ，点击<code>管理</code>跳转到管理页面，输入配置的账号和密码进行登录。</p>
<h3 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h3><p>双击<code>stop.bat</code>停止程序</p>
<h3 id="配置一个代理"><a href="#配置一个代理" class="headerlink" title="配置一个代理"></a>配置一个代理</h3><p>点击左上角的➕图标，会弹出新增代理的弹出框，如图：</p>
<p><img src="/img/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/1.png"></p>
<p>上图所配置的是mysql的访问代理</p>
<p>原来用过<code>jdbc:mysql://192.168.2.222:3306/</code>才能连接的数据库现在可以用<code>jdbc:mysql://localhost:7777/</code>连接了。</p>
<p>当然实际使用中不会使用localhost去访问，而是使用你reverse-proxy所在的机器ip。</p>
<p>点击确定后页面上会列出这条代理，如图：</p>
<p><img src="/img/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/2.png"></p>
<p>在上图中可以看到这一条数据有启用、管理、修改和删除四项功能，修改和删除没有什么可解释的。</p>
<p>点击启用开关后开关会变为灰色，表示这条配置不会生效。</p>
<p>管理按钮点击后会弹出允许使用代理的ip配置弹框，如图所示：</p>
<p><img src="/img/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/3.png"></p>
<p>点击➕可以输入ip（只能是ip，不能填写域名）</p>
<p>ip的填写格式有两种：</p>
<p>第一种是192.168.2.333这样的单个ip</p>
<p>第二种是192.168.2.0&#x2F;24这样的网段，表示任意192.168.2.*的ip都允许使用代理。</p>
<p>保存后关闭窗口即可</p>
<p><img src="/img/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/2.png"></p>
<p>接下来我们需要在主页面上点击启动Nginx按钮，等待nginx启动完成我们的配置就生效了。</p>
<p>第一次启动会弹出防火墙确认，如下图所示，点击允许即可。</p>
<p><img src="/img/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/4.png"></p>
<p>页面刷新后启动nginx按钮消失，会出现应用配置和停止nginx按钮，当修改了代理配置后需要点击应用配置按钮使配置生效。</p>
<p><img src="/img/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/5.png"></p>
<p>点击<strong>返回查看页面</strong>可以预览代理配置的所有信息（如下图所示），此页面访问无需登录。</p>
<p><img src="/img/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/6.png"></p>
<h2 id="问题反馈"><a href="#问题反馈" class="headerlink" title="问题反馈"></a>问题反馈</h2><p><a href="https://github.com/lovexy-fun/reverse-proxy/issues">issue</a></p>
]]></content>
      <tags>
        <tag>瞎搞</tag>
      </tags>
  </entry>
  <entry>
    <title>React从入门到放弃</title>
    <url>/2022/08/29/React%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/</url>
    <content><![CDATA[]]></content>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu创建应用快捷方式</title>
    <url>/2018/11/01/Ubuntu%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<h1 id="Ubuntu创建应用快捷方式"><a href="#Ubuntu创建应用快捷方式" class="headerlink" title="Ubuntu创建应用快捷方式"></a>Ubuntu创建应用快捷方式</h1><p>新建一个.desktop文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi eclipse.desktop</span><br></pre></td></tr></table></figure>

<p>然后又进行编辑</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[Desktop Entry]</span></span><br><span class="line"><span class="attr">Encoding</span>=UTF-<span class="number">8</span></span><br><span class="line"><span class="attr">Name</span>=eclipse</span><br><span class="line"><span class="attr">GenericName</span>=eclipse IDE</span><br><span class="line"><span class="attr">Comment</span>=java ide</span><br><span class="line"><span class="attr">Exec</span>=/etc/eclipse/eclipse</span><br><span class="line"><span class="attr">Icon</span>=/etc/eclipse/icon.xpm</span><br><span class="line"><span class="attr">Terminal</span>=<span class="literal">false</span></span><br><span class="line"><span class="attr">Type</span>=Application</span><br><span class="line"><span class="attr">Categories</span>=Application<span class="comment">;Development;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>关键字</th>
<th>含义</th>
<th>参数</th>
</tr>
</thead>
<tbody><tr>
<td>[Desktop Entry]</td>
<td>标识</td>
<td></td>
</tr>
<tr>
<td>Encoding</td>
<td>编码</td>
<td>UTF-8等编码格式</td>
</tr>
<tr>
<td>GenericName</td>
<td>描述</td>
<td>一句描述</td>
</tr>
<tr>
<td>Comment</td>
<td>注释</td>
<td>一句注释</td>
</tr>
<tr>
<td>Exec</td>
<td>可执行文件目录及文件名</td>
<td>文件名及目录</td>
</tr>
<tr>
<td>Icon</td>
<td>图标目录及图标名</td>
<td>文件名及目录</td>
</tr>
<tr>
<td>Terminal</td>
<td>是否启动终端</td>
<td>true&#x2F;false</td>
</tr>
<tr>
<td>Type</td>
<td>启动器类型</td>
<td></td>
</tr>
<tr>
<td>Categories</td>
<td>应用类型</td>
<td></td>
</tr>
</tbody></table>
<p>编写完后保存退出，然后执行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod +x eclipse.desktop</span><br></pre></td></tr></table></figure>

<p>如果想让这个快捷方式在全部应用里能找到，就把这个文件拷贝到**&#x2F;usr&#x2F;share&#x2F;application&#x2F;**下</p>
]]></content>
      <tags>
        <tag>瞎搞</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows10 快捷方式和程序图标变白问题</title>
    <url>/2021/01/18/Windows10%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F%E5%92%8C%E7%A8%8B%E5%BA%8F%E5%9B%BE%E6%A0%87%E5%8F%98%E7%99%BD%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>使用垃圾清理软件清理以后可能会出现部分软件图标变白的问题，用命令进行扫描修复什么的都不管用。</p>
<p>按<code>win+r</code>键打开运行，输入<code>%localappdata%</code>后回车，打开一个文件夹。</p>
<p>点击查看勾上隐藏的项目，然后就可以看到一个名为<strong>IconCache.db</strong>的文件，删除它。</p>
<p>打开任务管理器选中<strong>WIndows资源管理器</strong>点击重新启动，稍等一会WIndows资源管理器重启完成后就会发现问题解决了。</p>
]]></content>
      <tags>
        <tag>踩坑</tag>
      </tags>
  </entry>
  <entry>
    <title>js原生导出excel和csv</title>
    <url>/2019/11/22/js%E5%8E%9F%E7%94%9F%E5%AF%BC%E5%87%BAexcel%E5%92%8Ccsv/</url>
    <content><![CDATA[<blockquote>
<p>严格意义来说并不是真正的excel文件，只是可以用excel打开查看而已，实际上的格式是逗号分隔文件即csv文件。</p>
</blockquote>
<p>这里有几个坑要说一下：</p>
<ol>
<li>不加Unicode的utf8头部标识excel打开文件会乱码。</li>
<li>加了Unicode的utf8头部标识可能会导致文件读取的时候遇到非法字符。</li>
<li>IE不支持a标签的download属性。</li>
<li>这里用的是URL编码，还可以使用base64和blob。</li>
</ol>
<blockquote>
<p>Unicode头部标识：</p>
<p>EF BB BF	UTF-8<br>FF FE 	UTF-16 aka UCS-2, little endian<br>FE FF 	UTF-16 aka UCS-2, big endian<br>00 00 FF FE 	UTF-32 aka UCS-4, little endian.<br>00 00 FE FF 	UTF-32 aka UCS-4, big-endian.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">data = &#123;</span></span><br><span class="line"><span class="comment">	thead : [&quot;第一列&quot;, &quot;第二列&quot;, &quot;第三列&quot;],</span></span><br><span class="line"><span class="comment">	tbody : [</span></span><br><span class="line"><span class="comment">		[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;],</span></span><br><span class="line"><span class="comment">		[&quot;4&quot;, &quot;5&quot;, &quot;6&quot;],</span></span><br><span class="line"><span class="comment">	]</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 导出excel和csv</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data 要导出的数据，需要是上面的数据格式，当然也可以重写这个方法自己定义数据格式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> name 文件名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> type 文件类型 xls或csv</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">exportData</span>(<span class="params">data, name, type</span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> dataStr = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="comment">//Unicode头部标识</span></span><br><span class="line">	<span class="keyword">var</span> utf8Head = <span class="string">&quot;%EF%BB%BF&quot;</span>;</span><br><span class="line">	<span class="comment">//uri文件资源类型</span></span><br><span class="line">	<span class="keyword">var</span> csvUri = <span class="string">&quot;data:text/csv;charset=utf-8,&quot;</span>;</span><br><span class="line">	<span class="keyword">var</span> xlsUri = <span class="string">&quot;data:application/vnd.ms-excel;charset=utf-8,&quot;</span>;</span><br><span class="line">	<span class="comment">//创建一个a标签，用来下载</span></span><br><span class="line">	<span class="keyword">var</span> oa = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">	<span class="keyword">var</span> col = data.<span class="property">thead</span>.<span class="property">length</span>;</span><br><span class="line">	<span class="keyword">var</span> row = data.<span class="property">tbody</span>.<span class="property">length</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//数据构造</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; col; i++) &#123;</span><br><span class="line">		dataStr += data.<span class="property">thead</span>[i];</span><br><span class="line">		<span class="keyword">if</span>(i &lt; col - <span class="number">1</span>)</span><br><span class="line">			dataStr += <span class="string">&quot;,&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">	dataStr += <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">			dataStr += data.<span class="property">tbody</span>[i][j];</span><br><span class="line">			<span class="keyword">if</span>(j &lt; col - <span class="number">1</span>)</span><br><span class="line">				dataStr += <span class="string">&quot;,&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		dataStr += <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(type === <span class="string">&quot;csv&quot;</span>) &#123;</span><br><span class="line">		<span class="comment">//拼接编码，用url编码就可以，layui就是这种方式</span></span><br><span class="line">		oa.<span class="property">href</span> = csvUri + utf8Head + <span class="built_in">encodeURIComponent</span>(dataStr);</span><br><span class="line">		oa.<span class="property">download</span> = name + <span class="string">&quot;.csv&quot;</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span>(type === <span class="string">&quot;xls&quot;</span>) &#123;</span><br><span class="line">		oa.<span class="property">href</span> = xlsUri + utf8Head + <span class="built_in">encodeURIComponent</span>(dataStr);</span><br><span class="line">		oa.<span class="property">download</span> = name + <span class="string">&quot;.xls&quot;</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//触发链接点击事件进行下载</span></span><br><span class="line">	oa.<span class="title function_">click</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>maven打包配置</title>
    <url>/2022/08/02/maven%E6%89%93%E5%8C%85%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="指定mainClass和classpath"><a href="#指定mainClass和classpath" class="headerlink" title="指定mainClass和classpath"></a>指定mainClass和classpath</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">addClasspath</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addClasspath</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">classpathPrefix</span>&gt;</span>lib/<span class="tag">&lt;/<span class="name">classpathPrefix</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>fun.lovexy.demo.Start<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="拷贝依赖到指定目录"><a href="#拷贝依赖到指定目录" class="headerlink" title="拷贝依赖到指定目录"></a>拷贝依赖到指定目录</h2><p>将依赖拷贝到lib下</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/lib<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="将依赖打包到一起"><a href="#将依赖打包到一起" class="headerlink" title="将依赖打包到一起"></a>将依赖打包到一起</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>fun.lovexy.demo.Start<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">descriptorRefs</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">descriptorRef</span>&gt;</span>jar-with-dependencies<span class="tag">&lt;/<span class="name">descriptorRef</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">descriptorRefs</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>single<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="打包源码"><a href="#打包源码" class="headerlink" title="打包源码"></a>打包源码</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-source-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>via浏览器和Alook浏览器插件安装</title>
    <url>/2021/04/16/via%E6%B5%8F%E8%A7%88%E5%99%A8%E5%92%8CAlook%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<p>via和Alook是Android和IOS上可以支持JS插件的浏览器，一些常用的插件可以在via-app.cn上找到。但总会有人会思考点击安装按钮的是怎样将JS脚本代码安装到浏览器的。</p>
<p>经过对页面代码的分析得到一下结论：</p>
<p>浏览器向<code>window</code>上添加了一个<code>via</code>对象，安装某个脚本只需要调用方法即可，具体调用方法为：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">via</span>.<span class="title function_">addon</span>(<span class="title class_">Base64</span>字符串)</span><br></pre></td></tr></table></figure>

<p><strong>Base64字符串</strong>是由固定格式的json字符串转码而来的，json格式如下：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;作者，字符串格式，ASCII编码，例如：\u8fd9\u662f\u4e2a\u4f8b\u5b50&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JS脚本Base64编码后的字符串&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;插件名称，字符串格式，同样是ASCII编码&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;匹配的网址，一般使用*&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>对于via浏览器来说author和name是非必须项，id、code和url为必须项。</li>
<li>对于Alook浏览器来说author、name和id是非必须，code和url都存在时插件识别为被动插件，只有code时识别为主动插件。</li>
<li>目前没有准确的文档，或许会存在一些上述格式中不存在的字段。</li>
</ol>
<p>其他补充：</p>
<ol>
<li>alook浏览器必须使用带填充base64字符串，例如：<code>alert()</code>不带填充编码为<code>YWxlcnQoKQ</code>带填充编码为<code>YWxlcnQoKQ==</code>。</li>
</ol>
]]></content>
      <tags>
        <tag>瞎搞</tag>
      </tags>
  </entry>
  <entry>
    <title>在hyper-v虚拟机中安装并配置linux</title>
    <url>/2022/08/30/%E5%9C%A8hyper-v%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AElinux/</url>
    <content><![CDATA[<h2 id="WSL2真香？"><a href="#WSL2真香？" class="headerlink" title="WSL2真香？"></a>WSL2真香？</h2><p>WSL2相比于WSL1前者更类似于虚拟机，配合上<a href="https://apps.microsoft.com/store/detail/windows-terminal/9N0DX20HK701?hl=zh-cn&gl=CN">Windoes Terminal</a>的漂亮界面以及通过localhost直接访问，让人直呼真香!</p>
<p>那么WSL2真香吗？</p>
<p>WSL2理所当然的可以运行docker，你可以把一些mysql、redis之类的服务放在docker容器里运行。</p>
<p>当有一天你会发现在使用<code>systemctl</code>命令的时候会报这样的错误：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">System has not been booted with systemd as init system (PID 1). Can&#x27;t operate.</span><br><span class="line">Failed to connect to bus: Host is down</span><br></pre></td></tr></table></figure>

<p>出现这个问题是有解决方案的，去google搜索也能找到教程，但是点进教程连接我就默默地离开了页面（完全不想看）。</p>
<p>既然systemctl存在这样的问题，那其他地方也可能存在着问题，不如就直接使用虚拟机了。</p>
<h2 id="Hyper-V方案"><a href="#Hyper-V方案" class="headerlink" title="Hyper-V方案"></a>Hyper-V方案</h2><h3 id="1、开启Hyper-V功能"><a href="#1、开启Hyper-V功能" class="headerlink" title="1、开启Hyper-V功能"></a>1、开启Hyper-V功能</h3><p>在这里默认为你觉得WSL2有问题才考虑使用虚拟机的，那么你的设备一定开启了Hyper-V功能。</p>
<p>另外的，如果你没有使用过WSL2或者电脑系统为Windows10家庭版（Windows11家庭版），那么你需要参考下面的操作（具体操作方式请自行搜索，下面几步并非全部都是完成）。</p>
<ol>
<li>如果你的系统为家庭版，你可以搜索家庭版开启Hyper-V的教程。 </li>
<li>如果你的系统为家庭版，你可以更换系统为专业版或者使用 <a href="https://www.landiannews.com/">蓝点网</a> 的系统版本转换工具进行转换（不论是更换系统还是进行转换，都会失去原来的正版系统）。</li>
<li>如果你的系统是专业版，仅仅需要在<code>控制面板&gt;程序&gt;启用或关闭Windows功能</code>中打开Hyper-V功能就可以。</li>
</ol>
<h3 id="2、Ubuntu镜像下载"><a href="#2、Ubuntu镜像下载" class="headerlink" title="2、Ubuntu镜像下载"></a>2、Ubuntu镜像下载</h3><p><a href="https://ubuntu.com/download/server">Ubuntu Server 22.04 LTS</a></p>
<p>写这篇博客时的，最新server lts版本是22.04，目前没有测试18.04。</p>
<h3 id="3、创建虚拟机配置（暂时不安装操作系统）"><a href="#3、创建虚拟机配置（暂时不安装操作系统）" class="headerlink" title="3、创建虚拟机配置（暂时不安装操作系统）"></a>3、创建虚拟机配置（暂时不安装操作系统）</h3><p>经过前几步的配置后应该可以在Win菜单中搜索到<strong>Hyper-V 管理器</strong>，打开后界面如下：</p>
<p><img src="/img/%E5%9C%A8hyper-v%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AElinux/1.png"></p>
<p>点击右侧操作栏目的<strong>新建&gt;虚拟机</strong>后会出现配置引导</p>
<hr>
<p>点击下一步进行配置</p>
<p><img src="/img/%E5%9C%A8hyper-v%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AElinux/2.png"></p>
<hr>
<p>在这里需要制指定一下虚拟机的名称和虚拟机的存放位置。<br>如果是长期使用并且安装较多软件的话尽量选择一个存储空间足够的位置。<br>设置完成后点击下一步继续。</p>
<p><img src="/img/%E5%9C%A8hyper-v%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AElinux/3.png"></p>
<hr>
<p>这里选择第二代，然后下一步。</p>
<p><img src="/img/%E5%9C%A8hyper-v%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AElinux/4.png"></p>
<hr>
<p>内存先使用默认的1024MB动态内存，后期可以调整内存大小。</p>
<p><img src="/img/%E5%9C%A8hyper-v%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AElinux/5.png"></p>
<hr>
<p>先选择<strong>Default Switch</strong>，默认的网络连接用来连接互联网，后面装完系统后需要再新增一个网卡来固定虚拟机IP用来SSH连接使用。<br>选择默认后点击下一步。</p>
<p><img src="/img/%E5%9C%A8hyper-v%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AElinux/6.png"></p>
<hr>
<p>暂时选择不添加虚拟硬盘，点击下一步继续。</p>
<p><img src="/img/%E5%9C%A8hyper-v%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AElinux/7.png"></p>
<hr>
<p>点击完成等待虚拟机配置创建完成。<br><img src="/img/%E5%9C%A8hyper-v%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AElinux/8.png"></p>
<h2 id="最终解决方案"><a href="#最终解决方案" class="headerlink" title="最终解决方案"></a>最终解决方案</h2><p><a href="https://www.apple.com/mac/">Buy a Mac</a></p>
]]></content>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>明御助手</title>
    <url>/2022/06/29/%E6%98%8E%E5%BE%A1%E5%8A%A9%E6%89%8B/</url>
    <content><![CDATA[<h1 id="MingYuAssistant"><a href="#MingYuAssistant" class="headerlink" title="MingYuAssistant"></a>MingYuAssistant</h1><blockquote>
<p>明御助手</p>
<p>简化明御运维审计与风险控制系统的登录</p>
</blockquote>
<img src="/img/明御助手/1.png"/>

<p>看到上面你大概就知道这个插件的用途了</p>
<p>项目地址：<a href="https://github.com/lovexy-fun/MingYuAssistant">MingYuAssistant</a>，欢迎Start。</p>
<h1 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h1><h2 id="1️⃣安装"><a href="#1️⃣安装" class="headerlink" title="1️⃣安装"></a>1️⃣安装</h2><h3 id="一、油猴脚本插件安装"><a href="#一、油猴脚本插件安装" class="headerlink" title="一、油猴脚本插件安装"></a>一、油猴脚本插件安装</h3><p>在线安装：<a href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo">Chrome插件商店安装</a> | <a href="https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd">Edge插件商店安装</a></p>
<hr>
<p>如果无法在线安装，可以选择离线安装：</p>
<ol>
<li>下载仓库中提供的tampermonkey安装包：<a href="https://raw.githubusercontent.com/lovexy-fun/MingYuAssistant/master/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo_v4.16.1.crx">tampermonkey&#x2F;dhdgffkkebhmkfjojejmpbldmpobfkfo_v4.16.1.crx</a></li>
<li>打开浏览器插件管理页面 <code>chrome://extensions/</code> | <code>edge://extensions/</code>，将下载好的crx文件拖拽到页面上。</li>
</ol>
<h3 id="二、脚本安装"><a href="#二、脚本安装" class="headerlink" title="二、脚本安装"></a>二、脚本安装</h3><p>需要安装三个脚本 <a href="https://raw.githubusercontent.com/lovexy-fun/MingYuAssistant/master/src/main.user.js">明御助手</a> | <a href="https://raw.githubusercontent.com/lovexy-fun/MingYuAssistant/master/src/jsOTP.user.js">明御助手（jsOTP）</a> | <a href="https://raw.githubusercontent.com/lovexy-fun/MingYuAssistant/master/src/userData.user.js">明御助手（userData）</a></p>
<h2 id="2️⃣配置"><a href="#2️⃣配置" class="headerlink" title="2️⃣配置"></a>2️⃣配置</h2><h3 id="一、匹配地址修改"><a href="#一、匹配地址修改" class="headerlink" title="一、匹配地址修改"></a>一、匹配地址修改</h3><p>安装完成在Tampermonkey的管理面板里编辑 <strong>明御助手</strong>、<strong>明御助手（jsOTP）</strong> 和 <strong>明御助手（userData）</strong></p>
<p>点击脚本名称可以进行编辑，三个脚本都需要修改匹配地址，在脚本代码中找到头部的</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @match        https://127.0.0.1/*</span></span><br></pre></td></tr></table></figure>
<p>将127.0.0.1替换为内网的明御系统的地址，按<code>Ctrl+S</code>保存。三个脚本都需要进行修改。</p>
<h3 id="二、用户自定义配置"><a href="#二、用户自定义配置" class="headerlink" title="二、用户自定义配置"></a>二、用户自定义配置</h3><p><strong>明御助手（userData）</strong> 脚本是存储账号密码和用户配置的脚本，仅需要以规范格式填写自己的账号密码即可</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在代码中此段代码可以修改</span></span><br><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">    <span class="comment">//通用配置</span></span><br><span class="line">    <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="comment">//手机令牌刷新间隔，单位秒</span></span><br><span class="line">        <span class="attr">appKeyRefresh</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="comment">//页面刷新间隔，为了保持登录状态，0为不刷新，单位分钟</span></span><br><span class="line">        <span class="attr">pageRefresh</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//系统登录账户</span></span><br><span class="line">    <span class="attr">loginAccount</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&quot;TestAccount&quot;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&quot;TestPassword&quot;</span>,</span><br><span class="line">        <span class="comment">//手机令牌密钥，可以为空</span></span><br><span class="line">        <span class="attr">appKey</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">hostAccount</span>: &#123;</span><br><span class="line">        <span class="comment">//配置某台服务器的ip，制定这个服务器的登录名和密码，如果是数据库可以指定servicename字段，servicename可以不填写。</span></span><br><span class="line">        <span class="string">&quot;127.0.0.1&quot;</span>: &#123;</span><br><span class="line">            <span class="comment">//登录名</span></span><br><span class="line">            <span class="attr">acctname</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">            <span class="comment">//密码</span></span><br><span class="line">            <span class="attr">pwd</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">            <span class="comment">//数据库（oracle）或资产列表（db2），非必要字段可以不配置</span></span><br><span class="line">            <span class="attr">servicename</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//可以在此处继续添加服务器，没有数量限制，注意JavaScript的代码规范，例如：</span></span><br><span class="line">        ,<span class="string">&quot;192.168.1.1&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">acctname</span>: <span class="string">&quot;test2&quot;</span>,</span><br><span class="line">            <span class="attr">pwd</span>: <span class="string">&quot;test2&quot;</span>,</span><br><span class="line">            <span class="attr">servicename</span>: <span class="string">&quot;database_server_name&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="3️⃣使用"><a href="#3️⃣使用" class="headerlink" title="3️⃣使用"></a>3️⃣使用</h2><p>完成安装和配置后，访问明御运维审计与风险控制系统登录页面会在右下角有悬浮的 <strong>填写账号密码</strong> 按钮，点击按钮就能自动填写登录帐号和密码。</p>
<p>在登录服务器时，先选中要登录的服务器打开密码输入弹窗，点击 <strong>填写账号密码</strong> 就可以自动填写。</p>
<h2 id="4️⃣AppKey"><a href="#4️⃣AppKey" class="headerlink" title="4️⃣AppKey"></a>4️⃣AppKey</h2><p>系统可以使用手机APP口令验证登录，是OTP(One Time Password)的应用，一般使用 <strong>Google Authenticator</strong> 软件来生成，但是其导出的二维码中的链接是经过处理的，无法直接得到密钥。通常我们可以借助 <a href="https://github.com/dim13/otpauth">otpauth</a> 这个工具来解析出密钥，也可以使用 <a href="https://github.com/beemdevelopment/Aegis">Aegis</a> 软件来解析</p>
<h1 id="优化改造"><a href="#优化改造" class="headerlink" title="优化改造"></a>优化改造</h1><p>如果不满足您的需求请fork后自行优化改造。参考文档：<a href="https://www.tampermonkey.net/documentation.php">Tampermonkey Docs</a></p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>请妥善保管您的密码，此脚本没有网络访问权限，并不会偷取您的密码。</p>
<p>如果安全策略严格，不允许使用此脚本，请主动卸载。</p>
<p>编写此脚本的目的是简化自己的登录过程，在此分享仅用于技术研究。</p>
]]></content>
      <tags>
        <tag>插件</tag>
      </tags>
  </entry>
  <entry>
    <title>更优雅地使用linux做开发</title>
    <url>/2022/08/14/%E6%9B%B4%E4%BC%98%E9%9B%85%E5%9C%B0%E4%BD%BF%E7%94%A8linux%E5%81%9A%E5%BC%80%E5%8F%91/</url>
    <content><![CDATA[<blockquote>
<p>系统版本：Ubuntu 20.04 LTS &#x2F; WSL2 Ubuntu 20.04 LTS<br>内容不定时更新</p>
</blockquote>
<h2 id="更优雅地使用软件"><a href="#更优雅地使用软件" class="headerlink" title="更优雅地使用软件"></a>更优雅地使用软件</h2><h3 id="添加用户到软件的权限组"><a href="#添加用户到软件的权限组" class="headerlink" title="添加用户到软件的权限组"></a>添加用户到软件的权限组</h3><p>有些软件安装完成后会创建一个自己的用户组，有时如果不切换到root去使用软件会报错，这时把自己当前用户添加到软件的用户组就是解决权限问题。比如docker会创建一个docker用户组。</p>
<p>添加用户到组示例如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat /etc/group #查看所有的用户group</span><br><span class="line">usermod -a -G OutlawManiac ZhangSan #添加用户ZhangSan到OutlawManiac用户组</span><br></pre></td></tr></table></figure>

<h3 id="Desktop版本系统创建桌面图标"><a href="#Desktop版本系统创建桌面图标" class="headerlink" title="Desktop版本系统创建桌面图标"></a>Desktop版本系统创建桌面图标</h3><p>参考：<a href="https://lovexy.fun/2018/11/01/Ubuntu%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F/">Ubuntu创建应用快捷方式</a></p>
<h3 id="某些环境使用docker来搭建"><a href="#某些环境使用docker来搭建" class="headerlink" title="某些环境使用docker来搭建"></a>某些环境使用docker来搭建</h3><p>有时一些环境只是临时开发需要，如果你并不需要长期装在实体机上可以考虑使用docker容器</p>
<p>一些环境的搭建请参考：<a href="https://lovexy.fun/2022/08/16/%E7%94%A8docker%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">用docker搭建开发环境</a></p>
]]></content>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>用docker搭建开发环境</title>
    <url>/2022/08/16/%E7%94%A8docker%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</url>
    <content><![CDATA[<blockquote>
<p>说明：系统Ubuntu20.04或WSL2 Ubuntu20.04，docker版本20+</p>
</blockquote>
<h2 id="docker-compose安装"><a href="#docker-compose安装" class="headerlink" title="docker-compose安装"></a>docker-compose安装</h2><p>下载地址：<a href="https://github.com/docker/compose/releases">https://github.com/docker/compose/releases</a></p>
<p>下载后重命名为docker-compose，然后修改权限为755并移动到<code>/usr/local/bin</code>目录下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod 755 docker-compose</span><br><span class="line">mv docker-compose /usr/local/bin</span><br></pre></td></tr></table></figure>

<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><p>pull需要的版本的mysql的docker镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull mysql:5.7</span><br></pre></td></tr></table></figure>

<p>先run创建并启动容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --name mysql mysql:5.7</span><br></pre></td></tr></table></figure>

<p>拷贝容器中的my.cnf到外部</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker cp [容器ID]:/etc/mysql/my.cnf ./</span><br></pre></td></tr></table></figure>

<p>如果拷贝失败可能是容器内没有<code>/etc/mysql/my.cnf</code>，配置可能在<code>/etc/my.cnf</code>或<code>/usr/local/etc/mysql/my.cnf</code></p>
<p>具体需要到容器内部查看</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it [容器ID] /bin/bash</span><br></pre></td></tr></table></figure>

<p>停止并删除容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker stop [容器ID]</span><br><span class="line">docker rm [容器ID]</span><br></pre></td></tr></table></figure>

<p>准备好my.cnf后创建一个目录用于存放配置文件和数据文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p ./mysql/data</span><br><span class="line">mv my.cnf ./mysql</span><br></pre></td></tr></table></figure>

<p>正式创建并启动我们需要的容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root -e &quot;TZ=Asia/Shanghai&quot; -v /home/XXXX/mysql/data:/var/lib/mysql -v /home/XXXX/mysql/my.cnf:/etc/mysql/my.cnf -d mysql:5.7</span><br></pre></td></tr></table></figure>

<p>还可以使用docker-compose来启动<br>docker-compose.yml内容如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql/my.cnf:/etc/mysql/my.cnf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql/data:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;MYSQL_ROOT_PASSWORD=123456&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;TZ=Asia/Shanghai&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">3306</span><span class="string">:3306</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure>

<p>在yml文件同目录下创建并启动容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>


<h2 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h2><p>pull最新版本的redis的镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull redis:latest</span><br></pre></td></tr></table></figure>

<p>下载最新版本的redis：<a href="https://redis.io/download/">https://redis.io/download/</a></p>
<p>解压取出redis.conf文件</p>
<p>创建目录用来存储redis配置文件和持久化的数据，并将准备好的redis.conf放到目录下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p ./redis/data</span><br><span class="line">mv ./redis.conf ./redis</span><br></pre></td></tr></table></figure>

<p>创建并启动容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker --name redis -p 6379:6379 -v /home/XXXX/redis/data:/data -v /home/XXXX/redis/redis.conf:/etc/redis/redis.conf -d redis:latest</span><br></pre></td></tr></table></figure>

<p>可以选择docker-compose启动</p>
<p>docker-compose.yml如下</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:latest</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">6379</span><span class="string">:6379</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./redis/data:/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./redis/redis.conf:/etc/redis/redis.conf</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure>

<p>在yml文件同目录下创建并启动容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>端口占用问题</title>
    <url>/2022/08/29/%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2 id="一般情况下解决方案"><a href="#一般情况下解决方案" class="headerlink" title="一般情况下解决方案"></a>一般情况下解决方案</h2><p>一般情况下可以命令查看端口被哪些进程所占用了</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">lsof -i:端口号 #linux</span><br><span class="line">netstat -ano | findstr 端口号 #windows</span><br></pre></td></tr></table></figure>

<p>查找到到占用端口的进程后可以选择杀死进程，或者更换服务端口号。</p>
<h2 id="不一般情况下的解决方案"><a href="#不一般情况下的解决方案" class="headerlink" title="不一般情况下的解决方案"></a>不一般情况下的解决方案</h2><p>有时候你发现某个端口被占用了，你会理所当然的去查看那个进程占用了端口。</p>
<p>但是通过命令搜索之后你发现找不到任何进程在占用端口，这种情况一般在Windows下比较常见，尤其是启动Jetbrains全家桶系软件。</p>
<p>这种情况我也不知道为什么，一般通过重启系统能够解决，不过有时可能需要重启多次。</p>
<p>经过多次的踩坑摸索到如下解决方案：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">仅Windows环境这样操作，需要管理员权限</span></span><br><span class="line">netsh winsock reset</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行完成会看到successful相关的输出，然后重启电脑，基本上可以解决端口占用但是没有占用进程的问题</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>踩坑</tag>
      </tags>
  </entry>
  <entry>
    <title>远程连接linux上的mysql</title>
    <url>/2020/12/17/%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5linux%E4%B8%8A%E7%9A%84mysql/</url>
    <content><![CDATA[<p>linux服务器安装mysql之后需要进行一些配置操作才能够远程连接</p>
<ol>
<li><p>修改<strong>host</strong>、<strong>password</strong>和<strong>plugin</strong>字段</p>
<p>mysql5.7的user表是没有password的，变成了authentication_string字段。</p>
<p>plugin需要改为mysql_native_password才能使用密码进行连接。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> host<span class="operator">=</span><span class="string">&#x27;%&#x27;</span>,authentication_string<span class="operator">=</span>password(<span class="string">&#x27;要修改的密码&#x27;</span>),plugin<span class="operator">=</span><span class="string">&#x27;mysql_native_password&#x27;</span> <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改配置文件中的<strong>bind-address</strong></p>
<p>将配置文件中的<code>bind-address=127.0.0.1</code>改为<code>bind-address=0.0.0.0</code></p>
</li>
</ol>
]]></content>
      <tags>
        <tag>踩坑</tag>
      </tags>
  </entry>
  <entry>
    <title>颜艺大师阿尼亚(间谍过家家)</title>
    <url>/2022/07/03/%E9%A2%9C%E8%89%BA%E5%A4%A7%E5%B8%88%E9%98%BF%E5%B0%BC%E4%BA%9A(%E9%97%B4%E8%B0%8D%E8%BF%87%E5%AE%B6%E5%AE%B6)/</url>
    <content><![CDATA[<p>不定时更新</p>
<img title="阿尼亚-啊" src="/img/颜艺大师阿尼亚(间谍过家家)/阿尼亚-啊.gif" width="96" height="96" />
<img title="阿尼亚-沉默" src="/img/颜艺大师阿尼亚(间谍过家家)/阿尼亚-沉默.gif" width="96" height="96" />
<img title="阿尼亚-地球毁灭了" src="/img/颜艺大师阿尼亚(间谍过家家)/阿尼亚-地球毁灭了.gif" width="96" height="96" />
<img title="阿尼亚-微笑" src="/img/颜艺大师阿尼亚(间谍过家家)/阿尼亚-微笑.gif" width="96" height="96" />
<img title="阿尼亚-无聊" src="/img/颜艺大师阿尼亚(间谍过家家)/阿尼亚-无聊.gif" width="96" height="96" />
<img title="阿尼亚-无辜" src="/img/颜艺大师阿尼亚(间谍过家家)/阿尼亚-无辜.gif" width="96" height="96" />
<img title="阿尼亚-这个" src="/img/颜艺大师阿尼亚(间谍过家家)/阿尼亚-这个.gif" width="96" height="96" />
<img title="阿尼亚-阴险" src="/img/颜艺大师阿尼亚(间谍过家家)/阿尼亚-阴险.gif" width="96" height="96" />
<img title="阿尼亚-高兴" src="/img/颜艺大师阿尼亚(间谍过家家)/阿尼亚-高兴.gif" width="96" height="96" />
]]></content>
      <tags>
        <tag>表情包</tag>
      </tags>
  </entry>
</search>
